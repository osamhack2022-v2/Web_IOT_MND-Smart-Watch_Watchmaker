6)return k.transparent;const h=this.rgba.r*S/r+b.r*C*(1-S)/r,i=this.rgba.g*S/r+b.g*C*(1-S)/r,f=this.rgba.b*S/r+b.b*C*(1-S)/r;return new k(new m(h,i,f,r))}makeOpaque(I){if(this.isOpaque()||I.rgba.a!==1)return this;const{r:b,g:S,b:C,a:r}=this.rgba;return new k(new m(I.rgba.r-r*(I.rgba.r-b),I.rgba.g-r*(I.rgba.g-S),I.rgba.b-r*(I.rgba.b-C),1))}flatten(...I){const b=I.reduceRight((S,C)=>k._flatten(C,S));return k._flatten(this,b)}static _flatten(I,b){const S=1-I.rgba.a;return new k(new m(S*b.rgba.r+I.rgba.a*I.rgba.r,S*b.rgba.g+I.rgba.a*I.rgba.g,S*b.rgba.b+I.rgba.a*I.rgba.b))}toString(){return this._toString||(this._toString=k.Format.CSS.format(this)),this._toString}static getLighterColor(I,b,S){if(I.isLighterThan(b))return I;S=S||.5;const C=I.getRelativeLuminance(),r=b.getRelativeLuminance();return S=S*(r-C)/r,I.lighten(S)}static getDarkerColor(I,b,S){if(I.isDarkerThan(b))return I;S=S||.5;const C=I.getRelativeLuminance(),r=b.getRelativeLuminance();return S=S*(C-r)/C,I.darken(S)}}e.Color=k,k.white=new k(new m(255,255,255,1)),k.black=new k(new m(0,0,0,1)),k.red=new k(new m(255,0,0,1)),k.blue=new k(new m(0,0,255,1)),k.green=new k(new m(0,255,0,1)),k.cyan=new k(new m(0,255,255,1)),k.lightgrey=new k(new m(211,211,211,1)),k.transparent=new k(new m(0,0,0,0)),function(w){let I;(function(b){let S;(function(C){function r(o){return o.rgba.a===1?`rgb(${o.rgba.r}, ${o.rgba.g}, ${o.rgba.b})`:w.Format.CSS.formatRGBA(o)}C.formatRGB=r;function h(o){return`rgba(${o.rgba.r}, ${o.rgba.g}, ${o.rgba.b}, ${+o.rgba.a.toFixed(2)})`}C.formatRGBA=h;function i(o){return o.hsla.a===1?`hsl(${o.hsla.h}, ${(o.hsla.s*100).toFixed(2)}%, ${(o.hsla.l*100).toFixed(2)}%)`:w.Format.CSS.formatHSLA(o)}C.formatHSL=i;function f(o){return`hsla(${o.hsla.h}, ${(o.hsla.s*100).toFixed(2)}%, ${(o.hsla.l*100).toFixed(2)}%, ${o.hsla.a.toFixed(2)})`}C.formatHSLA=f;function u(o){const g=o.toString(16);return g.length!==2?"0"+g:g}function c(o){return`#${u(o.rgba.r)}${u(o.rgba.g)}${u(o.rgba.b)}`}C.formatHex=c;function n(o,g=!1){return g&&o.rgba.a===1?w.Format.CSS.formatHex(o):`#${u(o.rgba.r)}${u(o.rgba.g)}${u(o.rgba.b)}${u(Math.round(o.rgba.a*255))}`}C.formatHexA=n;function l(o){return o.isOpaque()?w.Format.CSS.formatHex(o):w.Format.CSS.formatRGBA(o)}C.format=l;function s(o){const g=o.length;if(g===0||o.charCodeAt(0)!==35)return null;if(g===7){const d=16*a(o.charCodeAt(1))+a(o.charCodeAt(2)),v=16*a(o.charCodeAt(3))+a(o.charCodeAt(4)),p=16*a(o.charCodeAt(5))+a(o.charCodeAt(6));return new w(new m(d,v,p,1))}if(g===9){const d=16*a(o.charCodeAt(1))+a(o.charCodeAt(2)),v=16*a(o.charCodeAt(3))+a(o.charCodeAt(4)),p=16*a(o.charCodeAt(5))+a(o.charCodeAt(6)),E=16*a(o.charCodeAt(7))+a(o.charCodeAt(8));return new w(new m(d,v,p,E/255))}if(g===4){const d=a(o.charCodeAt(1)),v=a(o.charCodeAt(2)),p=a(o.charCodeAt(3));return new w(new m(16*d+d,16*v+v,16*p+p))}if(g===5){const d=a(o.charCodeAt(1)),v=a(o.charCodeAt(2)),p=a(o.charCodeAt(3)),E=a(o.charCodeAt(4));return new w(new m(16*d+d,16*v+v,16*p+p,(16*E+E)/255))}return null}C.parseHex=s;function a(o){switch(o){case 48:return 0;case 49:return 1;case 50:return 2;case 51:return 3;case 52:return 4;case 53:return 5;case 54:return 6;case 55:return 7;case 56:return 8;case 57:return 9;case 97:return 10;case 65:return 10;case 98:retur